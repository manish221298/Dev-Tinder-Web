(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{3236:(e,s,t)=>{Promise.resolve().then(t.bind(t,5742))},5156:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(5155);function n(e){let{size:s="md"}=e;return(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[s]," border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin")})})}},5742:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(5155),n=t(2115),l=t(8675),i=t(5125),o=t(1496),a=t(63),c=t(2663),d=t(5156);function u(e){let{value:s,max:t=100,className:n=""}=e,l=Math.min(Math.max(s/t*100,0),100);return(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 ".concat(n),children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(l,"%")}})})}let h=e=>{let{quizSetId:s}=e,t=(0,a.useRouter)(),[l,h]=(0,n.useState)([]),[x,m]=(0,n.useState)(0),[g,p]=(0,n.useState)({}),[b,j]=(0,n.useState)(!0),[w,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),[N,k]=(0,n.useState)(null),z=async()=>{try{var e,r;j(!0);let t=await i.A.get("".concat(o.pc,"/quiz/").concat(s),{headers:{Authorization:"Bearer ".concat((0,o.gf)())}});h((null==t||null==(r=t.data)||null==(e=r.questionSet)?void 0:e.questions)||[])}catch(e){console.error("Error fetching quiz:",e),c.Ay.error("Failed to load quiz"),t.push("/quiz")}finally{j(!1)}};(0,n.useEffect)(()=>{s&&z()},[s]);let S=async(e,r)=>{try{f(!0);let n=await i.A.post("".concat(o.pc,"/quiz/submit"),{quizSetId:s,results:e},{headers:{Authorization:"Bearer ".concat((0,o.gf)())}});return console.log("Quiz results submitted:",n.data),c.Ay.success("Quiz submitted! Score: ".concat(r.score,"/").concat(r.total," (").concat(r.percentage,"%)"),{duration:4e3}),k(r),y(!0),setTimeout(()=>{y(!1),t.push("/quiz")},5e3),n.data}catch(e){return console.error("Error submitting quiz results:",e),c.Ay.error("Failed to submit quiz results"),null}finally{f(!1)}},q=async()=>{let e=0,s=0,t=l.map((t,r)=>{let n=g[r];return null==n?s++:n===t.answer&&e++,{question:t.Question||t.question,questionId:t._id,selectedAnswer:n||null}}),r=l.length,n=(e/r*100).toFixed(1),i={score:e,total:r,percentage:n,skipped:s};await S(t,i)};if(b)return(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[70vh]",children:(0,r.jsx)(d.A,{size:"lg"})});if(0===l.length)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[70vh] px-4",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No Questions Found"}),(0,r.jsx)("button",{onClick:()=>{t.push("/quiz")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors mt-4",children:"Back to Quiz List"})]});let A=l[x],C=x===l.length-1;return void 0!==g[x]&&g[x],(0,r.jsxs)("div",{className:"px-4 py-8 max-w-4xl mx-auto",children:[v&&N&&(0,r.jsx)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-green-800 mb-1",children:"Quiz Submitted Successfully!"}),(0,r.jsxs)("p",{className:"text-sm text-green-700",children:["Score:"," ",(0,r.jsxs)("span",{className:"font-semibold",children:[N.score,"/",N.total]})," ","(",N.percentage,"%)",N.skipped>0&&(0,r.jsxs)("span",{className:"ml-2",children:["â€¢ Skipped: ",N.skipped]})]})]}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),(0,r.jsx)("div",{className:"bg-white/90 backdrop-blur-md shadow-2xl border border-gray-200 rounded-lg",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Question ",x+1," of ",l.length]}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[Math.round((x+1)/l.length*100),"%"]})]}),(0,r.jsx)(u,{value:(x+1)/l.length*100,max:100})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:A.Question||A.question}),(0,r.jsx)("div",{className:"space-y-3",children:(()=>{let e=[];if(A.options&&Array.isArray(A.options))e=A.options;else for(let s=1;s<=4;s++){let t="Option".concat(s);A[t]&&e.push(A[t])}return e.map((e,s)=>{let t="string"==typeof e?e:String(e),n=g[x]===t;return(0,r.jsxs)("label",{className:"flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all ".concat(n?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-blue-300"),children:[(0,r.jsx)("input",{type:"radio",name:"question-".concat(x),value:t,checked:n,onChange:()=>{p({...g,[x]:t})},className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 mr-3"}),(0,r.jsx)("span",{className:"text-lg",children:t})]},s)})})()})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-6 gap-3",children:[(0,r.jsxs)("button",{onClick:()=>{x>0&&m(x-1)},disabled:0===x,className:"px-4 py-2 border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[!C&&(0,r.jsxs)("button",{onClick:()=>{p({...g,[x]:null}),x<l.length-1&&m(x+1)},className:"px-4 py-2 bg-transparent text-gray-600 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:["Skip",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),C?(0,r.jsx)("button",{onClick:q,disabled:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{size:"sm"}),"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:["Submit Quiz",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})}):(0,r.jsxs)("button",{onClick:()=>{x<l.length-1&&m(x+1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:["Next",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})})]})};function x(e){let{params:s}=e,{quizSetId:t}=(0,n.use)(s);return(0,r.jsx)(l.A,{children:(0,r.jsx)(h,{quizSetId:t})})}}},e=>{e.O(0,[555,690,663,675,441,493,358],()=>e(e.s=3236)),_N_E=e.O()}]);