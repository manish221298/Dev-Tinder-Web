(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{2271:(e,s,t)=>{Promise.resolve().then(t.bind(t,3284))},3284:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var l=t(5155),r=t(2115),a=t(8675),n=t(5125),i=t(1496),o=t(63),c=t(2663),d=t(5156);let x=e=>{let{quizSetId:s}=e,t=(0,o.useRouter)(),[a,x]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0),[m,p]=(0,r.useState)(null),j=async()=>{try{var e;h(!0);let t=await n.A.get("".concat(i.pc,"/result/set/").concat(s,"/users"),{headers:{Authorization:"Bearer ".concat((0,i.gf)())}});x((null==t||null==(e=t.data)?void 0:e.userResults)||[]),(null==t?void 0:t.data)&&p({setName:t.data.quizSetName,quizSetId:t.data.quizSetId,totalSubmissions:t.data.totalSubmissions})}catch(e){console.error("Error fetching user results:",e),c.Ay.error("Failed to load user results")}finally{h(!1)}};(0,r.useEffect)(()=>{s&&j()},[s]);let f=async e=>{if(window.confirm("Are you sure you want to delete this result?"))try{await n.A.delete("".concat(i.pc,"/result/").concat(e),{headers:{Authorization:"Bearer ".concat((0,i.gf)())}}),c.Ay.success("Result deleted successfully"),j()}catch(e){var s,t;console.error("Error deleting result:",e),c.Ay.error((null==e||null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to delete result")}};return u?(0,l.jsx)("div",{className:"flex justify-center items-center min-h-[70vh]",children:(0,l.jsx)(d.A,{size:"lg"})}):(0,l.jsxs)("div",{className:"px-4 py-8 max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("button",{onClick:()=>{t.push("/result")},className:"px-4 py-2 bg-transparent text-gray-600 hover:bg-gray-100 rounded-lg transition-colors mb-4 flex items-center gap-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Results"]}),(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsxs)("h1",{className:"text-4xl font-bold mb-2 flex items-center justify-center gap-3",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"User Results"]}),m&&(0,l.jsxs)("div",{className:"text-gray-600",children:[(0,l.jsx)("p",{className:"mb-1",children:m.setName}),(0,l.jsxs)("p",{className:"text-sm",children:["Total Submissions:"," ",(0,l.jsx)("span",{className:"font-semibold",children:m.totalSubmissions||0})]})]})]})]}),0===a.length?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No User Results Found"}),(0,l.jsx)("p",{className:"text-gray-400",children:"No users have completed this quiz yet."})]}):(0,l.jsx)("div",{className:"bg-white/90 backdrop-blur-md shadow-xl border border-gray-200 rounded-lg",children:(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full border-collapse",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-100",children:[(0,l.jsx)("th",{className:"font-bold text-base py-4 px-4 text-left",children:"User"}),(0,l.jsx)("th",{className:"font-bold text-base py-4 px-4 text-left",children:"Score"}),(0,l.jsx)("th",{className:"font-bold text-base py-4 px-4 text-left",children:"Correct"}),(0,l.jsx)("th",{className:"font-bold text-base py-4 px-4 text-left",children:"Incorrect"}),(0,l.jsx)("th",{className:"font-bold text-base py-4 px-4 text-left",children:"Percentage"}),(0,l.jsx)("th",{className:"font-bold text-base py-4 px-4 text-left",children:"Submitted At"}),(0,l.jsx)("th",{className:"font-bold text-base py-4 px-4 text-left",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:a.map((e,s)=>{var t,r,a,n,i,o;return null==(t=e.results)||t.filter(e=>null===e.selectedAnswer).length,(0,l.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors border-b border-gray-200",children:[(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"relative inline-block",children:(0,l.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden ring-2 ring-blue-600 ring-offset-2 ring-offset-white",children:(0,l.jsx)("img",{src:(null==(r=e.user)?void 0:r.photo)||"https://img.daisyui.com/images/profile/demo/2@94.webp",alt:"User avatar",className:"w-full h-full object-cover"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold",children:(null==(a=e.user)?void 0:a.firstName)&&(null==(n=e.user)?void 0:n.lastName)?"".concat(e.user.firstName," ").concat(e.user.lastName):(null==(i=e.user)?void 0:i.email)||"Anonymous User"}),(null==(o=e.user)?void 0:o.email)&&(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e.user.email})]})]})}),(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsxs)("span",{className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-full",children:[e.correctAnswers||0," /"," ",e.totalQuestions||0]})}),(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsx)("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded-full",children:e.correctAnswers||0})}),(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsx)("span",{className:"px-2 py-1 bg-red-600 text-white text-xs rounded-full",children:e.incorrectAnswers||0})}),(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsxs)("span",{className:"font-semibold",children:[e.score||0,"%"]})}),(0,l.jsx)("td",{className:"py-4 px-4 text-sm",children:e.submittedAt?new Date(e.submittedAt).toLocaleString():"N/A"}),(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsxs)("button",{onClick:()=>f(e.resultId),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 hover:scale-105 transition-transform flex items-center gap-1",title:"Delete result",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})})]},e.resultId||e._id||s)})})]})})})})]})};function u(e){let{params:s}=e,{quizSetId:t}=(0,r.use)(s);return(0,l.jsx)(a.A,{children:(0,l.jsx)(x,{quizSetId:t})})}},5156:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var l=t(5155);function r(e){let{size:s="md"}=e;return(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[s]," border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin")})})}}},e=>{e.O(0,[555,690,663,675,441,493,358],()=>e(e.s=2271)),_N_E=e.O()}]);